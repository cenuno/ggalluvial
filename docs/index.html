<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Alluvial Diagrams in 'ggplot2' • ggalluvial</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">ggalluvial</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/ggalluvial.html">Get Started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.rmd. Please edit that file -->
<div id="ggalluvial" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#ggalluvial" class="anchor"></a>ggalluvial</h1></div>
<div id="design" class="section level2">
<h2 class="hasAnchor">
<a href="#design" class="anchor"></a>Design</h2>
<p>This is a <a href="http://www.ggplot2-exts.org/"><strong>ggplot2</strong> extension</a> for alluvial diagrams. The alluvial plots implemented here can be used to visualize frequency distributions over time or frequency tables involving several categorical variables. The design is derived mostly from the <a href="https://github.com/mbojan/alluvial"><strong>alluvial</strong></a> package, but the <strong>ggplot2</strong> framework induced several conspicuous differences:</p>
<ul>
<li>
<strong>alluvial</strong> understands a variety of inputs (vectors, lists, data frames), while <strong>ggalluvial</strong> requires a single data frame;</li>
<li>
<strong>alluvial</strong> uses each variable of these inputs as a dimension of the data, whereas <strong>ggalluvial</strong> requires the user to specify the dimensions, either as separate aesthetics or as <a href="http://tidyr.tidyverse.org/">key-value pairs</a>;</li>
<li>
<strong>alluvial</strong> produces both the <em>alluvia</em>, which link cohorts across multiple dimensions, and (what are here called) the <em>strata</em>, which partition the data along each dimension, in a single function; whereas <strong>ggalluvial</strong> relies on separate layers (stats and geoms) to produce strata, alluvia, and alluvial segments called <em>lodes</em> and <em>flows</em>.</li>
</ul>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The latest stable release can be installed from CRAN:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"ggalluvial"</span>)</code></pre></div>
<p>The <a href="https://github.com/corybrunson/ggalluvial/tree/cran">cran branch</a> will contain the version most recently submitted to <a href="https://cran.r-project.org/package=ggalluvial">CRAN</a>.</p>
<p>Development versions can be installed from GitHub:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"corybrunson/ggalluvial"</span>, <span class="dt">build_vignettes =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>The <a href="https://github.com/corybrunson/ggalluvial/tree/optimization">optimization branch</a> contains a development version with experimental functions to reduce the number or area of alluvial overlaps (see issue <a href="/../../issues/6">#6</a>). Install it as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"corybrunson/ggalluvial"</span>, <span class="dt">ref =</span> <span class="st">"optimization"</span>)</code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<div id="example" class="section level3">
<h3 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h3>
<p>Here is how to generate an alluvial diagram representation of the multi-dimensional categorical dataset of passengers on the Titanic:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">titanic_wide &lt;-<span class="st"> </span><span class="kw">data.frame</span>(Titanic)
<span class="kw">head</span>(titanic_wide)
<span class="co">#&gt;   Class    Sex   Age Survived Freq</span>
<span class="co">#&gt; 1   1st   Male Child       No    0</span>
<span class="co">#&gt; 2   2nd   Male Child       No    0</span>
<span class="co">#&gt; 3   3rd   Male Child       No   35</span>
<span class="co">#&gt; 4  Crew   Male Child       No    0</span>
<span class="co">#&gt; 5   1st Female Child       No    0</span>
<span class="co">#&gt; 6   2nd Female Child       No    0</span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> titanic_wide,
       <span class="kw">aes</span>(<span class="dt">axis1 =</span> Class, <span class="dt">axis2 =</span> Sex, <span class="dt">axis3 =</span> Age,
           <span class="dt">weight =</span> Freq)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"Class"</span>, <span class="st">"Sex"</span>, <span class="st">"Age"</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="reference/geom_alluvium.html">geom_alluvium</a></span>(<span class="kw">aes</span>(<span class="dt">fill =</span> Survived)) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="reference/geom_stratum.html">geom_stratum</a></span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_text</span>(<span class="dt">stat =</span> <span class="st">"stratum"</span>, <span class="dt">label.strata =</span> <span class="ot">TRUE</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">"passengers on the maiden voyage of the Titanic"</span>,
          <span class="st">"stratified by demographics and survival"</span>)</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-6-1.png" width="672"></p>
<p>The data is in “wide” format, but <strong>ggalluvial</strong> also recognizes data in “long” format and can convert between the two:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">titanic_long &lt;-<span class="st"> </span><span class="kw"><a href="reference/alluvial-data.html">to_lodes</a></span>(<span class="kw">data.frame</span>(Titanic),
                         <span class="dt">key =</span> <span class="st">"Demographic"</span>,
                         <span class="dt">axes =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)
<span class="kw">head</span>(titanic_long)
<span class="co">#&gt;   Survived Freq alluvium Demographic stratum</span>
<span class="co">#&gt; 1       No    0        1       Class     1st</span>
<span class="co">#&gt; 2       No    0        2       Class     2nd</span>
<span class="co">#&gt; 3       No   35        3       Class     3rd</span>
<span class="co">#&gt; 4       No    0        4       Class    Crew</span>
<span class="co">#&gt; 5       No    0        5       Class     1st</span>
<span class="co">#&gt; 6       No    0        6       Class     2nd</span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> titanic_long,
       <span class="kw">aes</span>(<span class="dt">x =</span> Demographic, <span class="dt">stratum =</span> stratum, <span class="dt">alluvium =</span> alluvium,
           <span class="dt">weight =</span> Freq, <span class="dt">label =</span> stratum)) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="reference/geom_alluvium.html">geom_alluvium</a></span>(<span class="kw">aes</span>(<span class="dt">fill =</span> Survived)) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="reference/geom_stratum.html">geom_stratum</a></span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_text</span>(<span class="dt">stat =</span> <span class="st">"stratum"</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">"passengers on the maiden voyage of the Titanic"</span>,
          <span class="st">"stratified by demographics and survival"</span>)</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-7-1.png" width="672"></p>
</div>
<div id="resources" class="section level3">
<h3 class="hasAnchor">
<a href="#resources" class="anchor"></a>Resources</h3>
<p>For detailed discussion of the data formats recognized by <strong>ggalluvial</strong> and several examples that illustrate its flexibility and limitations, read the vignette:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">vignette</span>(<span class="dt">topic =</span> <span class="st">"ggalluvial"</span>, <span class="dt">package =</span> <span class="st">"ggalluvial"</span>)</code></pre></div>
<p>The documentation contains several examples; use <code>help()</code> to call forth examples of any layer (<code>stat_*</code> or <code>geom_*</code>).</p>
</div>
</div>
<div id="feedback" class="section level2">
<h2 class="hasAnchor">
<a href="#feedback" class="anchor"></a>Feedback</h2>
<div id="cite" class="section level3">
<h3 class="hasAnchor">
<a href="#cite" class="anchor"></a>Cite</h3>
<p>If you use <strong>ggalluvial</strong>-generated figures in publication, i’d be grateful to hear about it! You can also cite the package according to <code>citation("ggalluvial")</code>.</p>
</div>
<div id="contribute" class="section level3">
<h3 class="hasAnchor">
<a href="#contribute" class="anchor"></a>Contribute</h3>
<p>Issues and pull requests are more than welcome! Pretty much every fix and feature of this package derives from a problem or question posed by someone with datasets or design goals i hadn’t anticipated.</p>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2 class="hasAnchor">
<a href="#sidebar" class="anchor"></a>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cran.r-project.org/package=ggalluvial">https://​cran.r-project.org/​package=ggalluvial</a>
</li>
</ul>
<h2>License</h2>
<p><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Jason Cory Brunson <br><small class="roles"> Author, maintainer </small> </li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jason Cory Brunson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
